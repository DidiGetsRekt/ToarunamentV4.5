;---------------------------------------------------------------------------
[Statedef -2]
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;初期設定 コンフィグのステート 変更OK！
;---------------------------------------------------------------------------
[State -2, DefenceMulSet]
Type = DefenceMulSet
Trigger1 = Life <= 300
Value = 0.7
IgnoreHitPause = 1

[State -2, DefenceMulSet]
Type = DefenceMulSet
Trigger1 = Life <= 150
Value = 0.5
IgnoreHitPause = 1


[State -2, コンボ確認スイッチ]
	type = VarSet
	trigger1 = RoundsExisted = 0
	fvar(39) = 0	;ここの数字を変えることで設定可能
					;AIのコンボ確認デバッグ用
					;1でオン、0でオフ 
					;デフォルト0

[State -2, 常時AIオン]
	type = VarSet
	trigger1 = roundsexisted = 0 && roundstate = 0 && roundno = 1
	var(59) =  	0	;ここの数字を変えることで設定可能
					;1で常にAIオン、操作不可
					;デフォルトは0 

[State -2, AIレベル]
	type = VarSet
	trigger1 = RoundsExisted = 0
	var(58) = 10	;ここの数字を変えることで設定可能
					;値が高いほど高精度 上限11まで 11にすると超反応あり
					;1以上でAIオン、0でAIオフ 
					;デフォルトは10

[State -2, 最強の拒絶タイプ設定]
	type = VarSet
	trigger1 = RoundsExisted = 0
	var(18) = 0 	;ここの数字を変えることで設定可能
					;0でATフィールド割れる、1で割れない
					;デフォルトは0

[State -2, 却本作り初期設定]
	type = VarSet
	trigger1 = roundsexisted = 0 && roundstate = 0 && roundno = 1
	var(12) = 0 	;ここの数字を変えることで設定可能
					;2にすることで却本作り等特定の技初期から解禁
					;1は駄目
					;デフォルトは0
				
[State -2, 大嘘憑き初期設定]
	type = VarSet
	trigger1 = roundsexisted = 0 && roundstate = 0 && roundno = 1
	var(13) = 0 	;ここの数字を変えることで設定可能
					;2にすることでリザレクション等特定の技初期から解禁
					;1は駄目
					;デフォルトは0
				
[State -2, リザレクション回数設定]
	type = VarSet
	trigger1 = RoundsExisted = 0
	var(14) = 1 	;ここの数字を変えることで設定可能
					;0でリザレクション使用不可
					;1以上で1Rに設定回数のリザレクション使用可能 上限999まで
					;デフォルトは1

[State -2, リザレクション回復値設定]
	type = VarSet
	trigger1 = RoundsExisted = 0
	fvar(2) =0.3	;ここの数字を変えることで設定可能
					;0.1〜1の範囲で設定するとリザレクション時に回復 0.3で30％、1で100%回復
					;デフォルトは0.3

[State -2, 根性値設定]
	type = VarSet
	trigger1 = RoundsExisted = 0
	fvar(3) = 0.6	;ここの数字を0〜1の範囲で設定するとで設定可能
					;体力三割以下でマイナス螺子が点灯してる時に設定した割合でダメージカット
					;0.3で30％、1で100%のダメージカット 0だとダメージカット無し
					;デフォルトは0.6

[State -2, 負完全スイッチ]
	type = VarSet
	trigger1 = RoundsExisted = 0
	var(22) = 1 	;ここの数字を変えることで設定可能
					;0にすることでゲージ技以外で倒せなくなる
					;デフォルトは1
				
[State -2, ラスボススイッチ]
	type = VarSet
	trigger1 = RoundsExisted = 0
	var(23) = 0 	;ここの数字を変えることで設定可能
					;1にすることで特定の技で失敗しなくなる等強化される
					;デフォルトは0

[State -2, ゲジマシスイッチ]
	type = VarSet
	trigger1 = RoundsExisted = 0
	var(26) =  0	;ここの数字を変えることで設定可能
					;1以上にすることでゲジマシ 設定値が高いほど増加
					;デフォルトは0

[State -2,『却本作り＋大嘘憑き』条件設定]
	type = Varset
	triggerAll = Enemy,TeamMode = Single || Enemy,TeamMode = simul
	trigger1 = roundstate = 0 && roundno = 1
	var(52) = 1 	;ここの数字を変えることで設定可能
					;0、いつでも発動可能、 1〜、勝利ラウンド数が設定値以上になると発動可能
					;デフォルトは1(1R勝利すれば発動可能)

[State -2,『裸エプロン』即死スイッチ]
	type = Varset
	trigger1 = roundsexisted = 0 && roundstate = 0 && roundno = 1
	var(53) = 0 	;ここの数字を変えることで設定可能
					
					;0
					;通常性能

					;1
					;相手が『裸エプロンやられ』に対応している場合自分のみ即死

					;2
					;相手が『裸エプロンやられ』に対応していない場合相手即死
					;相手が対応している場合自分即死
					;相手が『裸エプロンブチギレやられ』を搭載してない場合でも裸エプロンブチギレ演出になる

					;デフォルトは0
					
[State -2, 心の壁強度初期設定]
	type = VarSet
	triggerAll = !var(18)
	triggerAll = RoundsExisted = 0
	trigger1 = TeamMode = Single || TeamMode = simul
	trigger1 = RoundState = 0
	trigger2 = TeamMode = Turns
	trigger2 = RoundState = 0 || RoundState = 1
	fvar(17) = 140;160;200;400	;ここの数字を変えることでATフィールドの耐久度を1〜1000の範囲で設定可能
					;デフォルトは400
					
[State -2,初期ゲージ設定]
	Type= PowerSet
	trigger1 = roundsexisted = 0 && roundstate = 0 && roundno = 1;
	value = 1000	; 0〜13000で設定可能 1000単位で1本
					;デフォルトは1000

[State -2];アイコンy軸
	type = Varset
	trigger1 = Numhelper(30000) = 0
	var(31) = 0 + ifelse(var(18),5,0)
			;↑こっち 
					;左の数字を変えることで設定可能
			 		;デフォルトは0 -方向で上に

[State -2];アイコンx軸
	type = Varset
	trigger1 = Numhelper(30000) = 0
	var(32) = 0 	;デフォルトは0 -方向で中央に

;===========================================================================
;以下システム記述 変更×
;===========================================================================
;===========================================================================
;デバッグ
;===========================================================================
[State -2, クリップボード]
type = DisplayToClipboard
trigger1 = 1
Text = "var(1)=%d,var(10)=%d,var(52)=%d,fvar(3)=%f,fvar(11)=%f\n"
Params = var(1),var(10),var(52),fvar(3),fvar(11)
IgnoreHitPause = 1

[State -2, 距離確認デバック]
type = AppendToClipboard
trigger1 = 1
text =  "P2X:%f,P2Y:%f,Vx%f,Vy%f,Py%d \n"
params = P2BodyDist x,P2BodyDist y,vel x,vel y,EnemyNear,backEdgeDist <= 10;pos x
IgnoreHitPause = 1

;P2BodyDist x = 相手のｘの距離(プラスが→)
;P2BodyDist y = 相手のｙの距離(マイナスが↑)
;backedgebodydist  = 後ろの壁の距離 
;frontedgebodydist = 前の壁の距離(画面端じゃなくても約60まで近づける)
;Pos x = 自分の位置ｘ(ステージの真ん中から)
;Pos y = 自分の位置ｙ(床から)
;vel x = 自分の移動量ｘ
;vel y = 自分の移動量ｙ
;AnimTime = あとどれくらいのTIME(ﾌﾚｰﾑ)でｱﾆﾒｰｼｮﾝを終了するか
;	(ﾏｲﾅｽで表示されてるので注意)
;	ﾏｲﾅｽから１づつ0に近づく

;===========================================================================
;;AI関連
;===========================================================================
[State -2, AI起動用ヘルパー]
type=helper
trigger1=!NumHelper(10000)
trigger1=roundstate=2
trigger1=alive
trigger1=var(59)=0
Trigger1=(PrevStateNo=[190,199])||PrevStateNo=5900
Trigger1=ctrl&&stateno=0
helpertype=normal
name="AI"
stateno=10000
ID=10000
pos=9999,9999
keyctrl=1
pausemovetime=2147483647
supermovetime=2147483647
persistent = 0

;念のため↓も付けておく
[State -2, 関係無いステートに行かないように]
type=changestate
trigger1= ishelper(10000)
trigger1= stateno!=10000
value=10000

;===========================================================================
;カラー別
;===========================================================================
[State -2, コンボ補正強化];7P
	type =null; VarSet
	triggerAll = PalNo >= 7
 	trigger1 = fvar(0) < 0.30
 	fv = 0
 	value = 0.30
 	ignorehitpause = 1

[State -2, ノックバック上限追加];8P
	type = null;VarSet
	triggerAll = PalNo >= 8
 	trigger1 = fvar(11) > 25
 	fvar(11) = 25
	ignorehitpause = 1

[State -2, ゲジマユ];10P
	type = null;PowerSet
	trigger1 = PalNo >= 10
	trigger1 = power != powermax
	value = PowerMax
	ignorehitpause = 1

;===========================================================================
;システム
;===========================================================================
;---------------------------------------------------------------------------
;キャンセル初期化
;---------------------------------------------------------------------------
[State -2]
 	type = Varset
 	triggerall = var(1) = 1
 	trigger1 = movetype = H
 	trigger2 =  var(5) = 0
	trigger2 = !numtarget
	var(1) = 0
	ignorehitpause = 1
	
;---------------------------------------------------------------------------
;ダメージ補正
;---------------------------------------------------------------------------
[State -2];補正
 	type = Varset
 	trigger1 = fvar(0) < 0
 	fv = 0
 	value = 0
 	ignorehitpause = 1

[State -2];補正
 	type = Varset
 	trigger1 = !numtarget
 	trigger2 = target,stateno = [120,155]
 	fv = 0
	value = 1
	ignorehitpause = 1

[State -2];補正
 	type = Varset
 	trigger1 = fvar(1) < 0
 	fv = 1
 	value = 0
 	ignorehitpause = 1

[State -2];補正
 	type = Varset
 	trigger1 = !numtarget
 	trigger2 = target,stateno = [120,155]
 	fv = 1
	value = 1
	ignorehitpause = 1

;---------------------------------------------------------------------------
;ループ
;---------------------------------------------------------------------------
[State -2];ループ防止
 	type = Varset
 	trigger1 = !var(11)
 	trigger1 = enemy(0),stateno = 1385 || enemy(1),stateno = 1385
 	var(11)=1
	ignorehitpause = 1

[State -2];ループ初期化
 	type = Varset
 	triggerAll = var(11)
 	triggerAll = enemy(0),stateno != 1385 && enemy(1),stateno != 1385 
	triggerAll = !numhelper(1411) && !numhelper(1412)
 	trigger1 = !numtarget
 	trigger2 = target,stateno = [120,155]
 	var(11)=0
	ignorehitpause = 1

;---------------------------------------------------------------------------
;ノックバック
;---------------------------------------------------------------------------
[State -2];ノックバック初期化
	type = Varset
 	triggerAll = stateno !=[1350,1360]	
 	trigger1 = !numtarget
 	trigger2 = target,stateno = [120,155]
	fvar(11)=0
	ignorehitpause = 1

;---------------------------------------------------------------------------
;空中ジャンプ
;---------------------------------------------------------------------------
[State -2];空中ジャンプ初期化
 	type = Varset
 	triggerAll = var(19)
 	trigger1 = statetype != A
 	var(19)=0
	ignorehitpause = 1

;---------------------------------------------------------------------------
;超必殺技キャンセルカウント初期化
;---------------------------------------------------------------------------
[State -2];
 	type = Varset
 	triggerAll = var(24)
 	triggerAll = stateno !=[1350,1360]
 	trigger1 = !numtarget
 	trigger2 = target,stateno = [120,155]
 	var(24)=0
	ignorehitpause = 1

;---------------------------------------------------------------------------
;タッグ時相手死亡判断※AI用
;---------------------------------------------------------------------------
[State -2];判定
 	type = Varset
	Trigger1 = NumEnemy > 1
	var(51) =(EnemyNear(0),Alive=0)
	ignorehitpause = 1

[State -2];初期化
 	type = Varset
 	Trigger1 = var(51)
	Trigger1 = EnemyNear(0),Alive
	var(51) = 0
	ignorehitpause = 1

;---------------------------------------------------------------------------
;勝利数カウント
;---------------------------------------------------------------------------
[State -2];フラグ建て
	Type = Varadd
	var(52) = -1
	Trigger1 = var(52) != 0
	Trigger1 = RoundState = 4 ;試合終了後
	Trigger1 = win
	Trigger1 = time = 1
	ignorehitpause = 1

;---------------------------------------------------------------------------
;根性値
;---------------------------------------------------------------------------
[State -2,ガード]
Type     = VarSet
Trigger1 = Ctrl && StateNo%2 && StateNo = [151,155]
Trigger2 = PrevStateNo%2 = 0 && PrevStateNo = [150,154]
Trigger2 = StateNo%2 = 0 && StateNo = [150,154]
V        = 9
Value    = 0
Ignorehitpause = 1

[State -2,ライフ反転]
Type     = VarSet
Trigger1 = MoveType != H
V        = 9
Value    = -Life
Ignorehitpause = 1


[State -2,ダウン有効]
Type     = VarSet
Trigger1 = StateType = L || StateNo = 5070
Trigger1 = Var(9) = 0
V        = 9
Value    = -1-LifeMax
Ignorehitpause = 1


[State -2,一打終了]
Type     = VarSet
Trigger1 = MoveType = H
Trigger1 = Life <= Var(9) && Var(9)
V        = 9
Value    = 0
Ignorehitpause = 1

[State -2,ライフ]
Type     = VarSet
Trigger1 = MoveType = H
Trigger1 = Var(9) < 0 && Var(9) > -1-LifeMax
V        = 9
Value    = -Var(9)
Ignorehitpause = 1

;Valueがダメージ軽減率です。Value = 0.5なら、ダメージが50%軽減されます。
[State -2,根性値];BadLuck,UnLucky,HardLuck(黒)
Type     = VarSet
Trigger1 = 1
FV       = 9
Value    = ifelse((Life > 0.3*LifeMax || !var(12)), 0.0, fvar(3));0.6)
Ignorehitpause = 1


;---------------------------------------------------------------------------
; ATフィールド
;---------------------------------------------------------------------------
[State -2, ATフィールド中無敵]
	type = NotHitBy
	trigger1 = NumHelper(10040)
	trigger2 = NumHelper(10030)
	trigger3 = NumHelper(10041)
	value = SCA
	time = 2

[State -2, ATフィールド中押し出し]
	type = Width
	trigger1 = NumHelper(10040)
	trigger2 = NumHelper(10030)
	trigger3 = NumHelper(10041)
	value = 32,0

[State -2, ATフィールド中ガード不可]
	type = AssertSpecial
	trigger1 = NumHelper(10040)
	trigger2 = NumHelper(10030)
	trigger3 = NumHelper(10041)
	flag = nostandguard
	flag2 = nocrouchguard
	flag3 = noairguard

[State -2];ATフィールド上限
	Type= Varset
	triggerAll = !var(18)
	trigger1 = time = 1
	trigger1 = Numhelper(30000) = 0
	var(3)=fvar(17)

[State -2];ゲージ呼び出し
	type = Helper
;	triggerAll = !var(18)
	trigger1 = time = 1
	trigger1 = Numhelper(30000) = 0
	stateno = 30000
	ID = 30000
	pos = 0,0
	postype = left
	helpertype = normal
	name = "gauge"
	keyctrl = 0
	ownpal = 1
	pausemovetime = 9999
	supermovetime = 9999

[State -2];タイマー呼び出し
	type = Helper
	trigger1 = time = 1
	trigger1 = Numhelper(30001) = 0
	stateno = 30001
	ID = 30001
	pos = 0,0
	postype = left
	helpertype = normal
	name = "Timer"
	keyctrl = 0
	ownpal = 1
	pausemovetime = 1
	supermovetime = 1

[State -2];ATフィールド上限
	Type= Varset
	triggerAll = !var(18)
	Trigger1= var(3) >fvar(17)
	var(3)=fvar(17)

[State -2];ATフィールド下限
	Type= Varset
	triggerAll = !var(18)
	Trigger1= var(3) < 0
	var(3)=0

[State -2,発狂移行]
	Type=ChangeState
	triggerAll = !var(18)
	trigger1 = StateType != A
	Trigger1 = var(4) = 1
	value=1510
	ignorehitpause = 1

[State -2,操作不能]
	type = CtrlSet
	triggerAll = !var(18)
	trigger1 = var(4)
	value = 0

[State -2,操作不能]
	type = NotHitBy
	trigger1 = var(4) = 1
	value = SC,AT
	time = 1

[State -2];時間測定
	Type= Varadd
	triggerAll = !var(18)
	Trigger1= var(4) = 2
	Trigger1= GameTime%6 = 0
	var(6) = 1

;[State -2];時間測定
;	Type= Varset
;	triggerAll = !var(18)
;	Trigger1= var(4) = 2
;	Trigger1= movetype = H
;	var(6) = 29

[State -2];初期化
	Type= Varset
	triggerAll = !var(18)
	Trigger1= var(4) = 2
	Trigger1= var(6) >= 29
	var(3)=fvar(17)


[State -2];初期化
	Type= Varset
	triggerAll = !var(18)
	Trigger1= var(4) = 2
	Trigger1= var(6) >= 29
	trigger1 = var(6) := 0 || 1
	var(4)=0

[State -2];ATフィールド回復
 	type = Varadd
	triggerAll = !var(18)
	trigger1 = !var(4)
	trigger1 = var(3)<fvar(17)
	Trigger1= GameTime%26 = 0
	var(3) = 1
	ignorehitpause = 1

;---------------------------------------------------------------------------
; 勇者の剣死亡
;---------------------------------------------------------------------------
[State -2, 剣消滅]
type = RemoveExplod
trigger1 = !alive
trigger1 = NumExplod(6232)
ID = 6232

[State -2, ステート変更]
type = ChangeState
trigger1 = !var(21)
trigger1 = var(42) = 2
trigger1 = !alive
value = 5150

[State 2501, 血]
type = Explod
trigger1 = stateno = 5150
trigger1 = time = 1
trigger1 = var(42) = 2
anim = 2113
ID = 2113
pos = -10, -35
postype = p1
bindtime = -1
random = 0, 0
supermovetime = 60
pausemovetime = 0
sprpriority = 3
ownpal = 1
removetime = -2

[State 1201, 血]
type = Explod
trigger1 = stateno = 5150
trigger1 = time = 1
trigger1 = var(42) = 2
anim = 2113
pos = 10, -35
postype = p1
bindtime = 1
removetime = -2
supermovetime = 0
pausemovetime = 0
sprpriority = 3
scale = 1.25,1.5
ownpal = 1
facing = -1

[State -2, ]
type = varset
trigger1 = var(42) = 2
trigger1 = alive
var(42) = 0

;---------------------------------------------------------------------------
;カウンター
;---------------------------------------------------------------------------
[State -2]
 	type = Varset
 	trigger1 = enemynear,movetype = A
	var(2) = 1
	ignorehitpause = 1

[State -2]
	type = Varset
	triggerall = movetype = A;!= H
	triggerall = enemynear,movetype = H 
	triggerall = var(2) = 1
	trigger1 = movehit	|| ProjHit = 1 
 		
	trigger2 = helper(1005),movehit;角螺子ヘルパー
	trigger3 = helper(1006),movehit;丸螺子ヘルパー
 	
	trigger4 = helper(2515),movehit;エア
	trigger5 = helper(2610),movehit;粉塵爆発


	var(2) = 2
	ignorehitpause = 1

[State -2]
 	type = Varset
 	triggerall = var(2) = 1
 	trigger1 = enemynear,movetype = H
	var(2) = 0
	ignorehitpause = 1

[State -2, カウンターアタックボイス]
	type = PlaySnd
	trigger1 = var(2)=2
	value = 9999, 4
	ignorehitpause = 1

[State -2]
	type = Explod
	triggerall = numexplod(14000) = 0
	trigger1 = var(2) = 2
	trigger2 = var(2) = 3
	anim = ifelse(var(2)=2,14000,14002)
	ID = 14000
	pos = ifelse(teamside=1,60,260),  60
	postype = left
	bindtime = -1
	removetime = -1
	supermovetime = 9999
	pausemovetime = 9999
	sprpriority = -1
	scale = .5,.5
	ontop = 0
	ownpal = 1
	ignorehitpause = 1

[State -2]
 	type = Varset
 	trigger1 = var(2) = 2
	var(2) = 3
	ignorehitpause = 1

[State -2]
	type = RemoveExplod
	trigger1 = enemynear,movetype = I
	trigger2 = target,stateno =[5110,5120]
	trigger3 = RoundState = 3
	ID = 14000
	ignorehitpause = 1
	
[State -2]
	type = Explod
	triggerall =var(2) != 0
	triggerall =var(2) != 1
	trigger1 = enemynear,movetype = I
	trigger2 = target,stateno =[5110,5120]
	trigger3 = RoundState = 3
	anim = 14001
	pos = ifelse(teamside=1,60,260),  60
	postype = left
	bindtime = -1
	supermovetime = 9999
	pausemovetime = 9999
	sprpriority = 3
	scale = .5,.5
	ontop = 0
	ownpal = 1
	ignorehitpause = 1

[State -2]
 	type = Varset
	trigger1 = enemynear,movetype = I
	trigger2 = target,stateno =[5110,5120]
	trigger3 = RoundState = 3
	var(2) = 0
	ignorehitpause = 1
	
;---------------------------------------------------------------------------
;アーマー
;---------------------------------------------------------------------------
[State -2, アーマーヘルパー呼び出し]
type = Helper
triggerall = !NumHelper(9000) && MoveType != H
trigger1  = StateNo =  1110 && Time = 1;『螺子上げる』（強）
trigger2  = StateNo =  2100 && Time = 1;『グンニグルの螺子』
name = "Armor"
stateno = 9000
ID = 9000
size.xscale = 1
size.yscale = 1
postype = p1
pos = 0,0
ownpal = 1
supermovetime = 99999
pausemovetime = 99999

[State -2, アーマー中の投げ以外無敵]
type = NotHitBy
trigger1 = NumHelper(9000)
value = SCA;,AA,AP
time = 2

[State -2, アーマー中に被弾した時の無敵時間延長（２重被弾抑制処置）]
type = NotHitBy
trigger1 = NumHelper(9000)
trigger1 = Helper(9000),GetHitVar(damage)
value = SCA
time = Helper(9000),GetHitVar(hitshaketime)+5


[State -2, アーマー受けした時のライフ減少]
type = LifeAdd
trigger1 = NumHelper(9000)
trigger1 = Helper(9000),GetHitVar(damage)
value = -1*Helper(9000),GetHitVar(damage)
absolute = 1
kill = 0;ifelse((var(14)>var(17) && var(13) && Power>999),0,1)
ignorehitpause = 1

;---------------------------------------------------------------------------
;壁吹き飛ばし
;---------------------------------------------------------------------------
	[State -2,壁吹き飛ばし]
		type = TargetState
		triggerAll = Projhit(2610)=1
		trigger1 = StateNo=2600
		value = 7000
		ignorehitpause = 1

	[State -2,向き直し]
		type = TargetFacing
		triggerAll = Projhit(2610)=1
		trigger1 = StateNo=2600
		trigger1 = numTarget(2610)
		value = -1
		ignorehitpause = 1

[State -2,壁吹き飛ばしエフェクト]
	type = Explod
	triggerAll =Target,Pos Y > -5
	trigger1 = numTarget
	trigger1 = Target,StateNo = 7010
	trigger1 = Target,Time = 1
	anim = 10060
	pos = 100, 0
	postype = p2
	bindtime = -1
	removetime = 80
	supermovetime = 9999
	pausemovetime = 9999
	sprpriority = 9999
	scale = 2,2
	ontop = 1
	ownpal = 1
	facing =-1
	ignorehitpause = 1
	ID =13480

[State -2,壁吹き飛ばしエフェクト消し]
	type = RemoveExplod
	trigger1 = numTarget
	trigger1 = Target,StateNo = 7020
	trigger1 = Target,Time = 1
	trigger2 = numExplod(13480)
	trigger2 = Target,StateNo != 7010
	ID =13480

[State -2,壁ぶつかりエフェクト]
	type = Explod
	trigger1 = numTarget
	trigger1 = Target,StateNo = 7020
	trigger1 = Target,Time = 1
	anim = 12210
	pos = -10, -70
	postype = p2
;	bindtime = -1
	supermovetime = 9999
	pausemovetime = 9999
	sprpriority = 9999
	scale = .5,.5
	ontop = 1
	ownpal = 1
	facing =-1
	ignorehitpause = 1

[State -2,壁ぶつかりエフェクト]
	type = TargetVelAdd
	trigger1 = stateno = 2800
	trigger1 = numTarget
	trigger1 = Target,StateNo = 7030
	y = 0.125

;---------------------------------------------------------------------------
;床バウンド
;---------------------------------------------------------------------------
[State -2]
	type = TargetVelSet
	trigger1 = numTarget
	trigger1 = Target,StateNo = [7060,7061]
	trigger1 = Target,Time = 1
	x = -12.75
	y = 18

[State -2,床ぶつかりエフェクト]
	type = Explod
	trigger1 = numTarget
	trigger1 = Target,StateNo = 2891
	trigger1 = Target,Time = 1
	anim = 10080
	pos = 0, -10
	postype = p2
;	bindtime = -1
	supermovetime = 9999
	pausemovetime = 9999
	sprpriority = 9999
	scale = 1.5,1.5
	ontop = 1
	ownpal = 1
	facing =-1

[State -2,床ぶつかりエフェクト]
	type = Explod
	trigger1 = numTarget
	trigger1 = Target,StateNo = 2891
	trigger1 = Target,Time = 1
	anim = 10090
	pos = 0, -10
	postype = p2
;	bindtime = -1
	supermovetime = 9999
	pausemovetime = 9999
	sprpriority = 9999
	scale = 1.5,1.5
	ontop = 1
	ownpal = 1
	facing =-1
	
[State -2,床SE]
	type = PlaySnd
	trigger1 = numTarget
	trigger1 = Target,StateNo = 2891
	trigger1 = Target,Time = 1
	value = 500,2
	volume = 255

;===========================================================================
;特殊システム
;===========================================================================
;---------------------------------------------------------------------------
; ‐ポイント
;---------------------------------------------------------------------------
[State -2];‐ポイント上限
	Type= Varset
	triggerAll = !var(12)
	Trigger1= var(7) >1300
	var(12)=1

[State -2,SE]
	type = PlaySnd
	trigger1 = var(12) = 1
	value = 105,22
	volume = 255

[State -2];＋ポイント上限
	Type= Varset
	trigger1 = var(12) = 1
	var(12)=2

[State -2];ゲージ増加
 	type = poweradd
	triggerAll = var(12)
	trigger1 = statetype != L
	trigger1 = movetype = H
	trigger1 = time = 1
	value = 13 * (var(23)+1)
	ignorehitpause = 1

[State -2];瀕死
 	type = Varadd
	triggerAll = !var(12)
 	trigger1 = Life < 0.3*LifeMax
	Trigger1= GameTime%13 = 0
	var(7) = 2 * NumEnemy
	ignorehitpause = 1

[State -2];やられ中
 	type = Varadd
	triggerAll = !var(12)
	trigger1 = alive
 	trigger1 = movetype = H
	Trigger1= GameTime%3 = 0
	var(7) = 4 * NumEnemy
	ignorehitpause = 1

[State -2];ガード中
 	type = Varadd
	triggerAll = !var(12)
	trigger1 = stateno = [150,155]
	Trigger1= GameTime%3 = 0
	var(7) = 3 * NumEnemy
	ignorehitpause = 1

[State -2];死亡中
 	type = Varadd
	triggerAll = !var(12)
	trigger1 = RoundState = 2
	trigger1 = !alive
	Trigger1= GameTime%3 = 0
	var(7) = 2 * NumEnemy
	ignorehitpause = 1

[State -2];後退
 	type = Varadd
	triggerAll = !var(12)
	trigger1 = stateno = 20
	trigger1 = command = "holdback"
	Trigger1= GameTime%6 = 0
	var(7) = 1 * NumEnemy
	ignorehitpause = 1

[State -2];バックステップ
 	type = Varadd
	triggerAll = !var(12)
	Trigger1=PrevStateNo!=700
	trigger1 = stateno = 105
	trigger1 = time = 1
	var(7) = 26 * NumEnemy
	ignorehitpause = 1

[State -2];挑発
 	type = Varadd
	triggerAll = !var(12)
	triggerAll = stateno = 700
	Triggerall= GameTime%3 = 0
	trigger1 = anim != 701
	trigger2 = anim != 702
	trigger3 = anim != 703
	var(7) = 4 * NumEnemy
	ignorehitpause = 1

[State -2];『弱点を突く』
 	type = Varadd
	triggerAll = !var(12)
	trigger1 = stateno = 2300
	trigger1 = anim = 2300
	trigger1 = animelemtime(11)=0
	var(7) = 130 * NumEnemy
	ignorehitpause = 1

[State -2];『魔獣をも殺す刀』失敗
 	type = Varadd
	triggerAll = !var(12)
	trigger1 = stateno = 2402
	trigger1 = anim = 2401
	trigger1 = animelemtime(10) = 0
	var(7) = 333
	ignorehitpause = 1

[State -2];;『勇者の剣』失敗
 	type = Varadd
	triggerAll = !var(12)
	trigger1 = stateno = 2502
	trigger1 = animelemtime(10) = 0
	var(7) = 444
	ignorehitpause = 1

[State -2];『裸エプロン』対応
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2214
	trigger1 = AnimElemtime(2) = 0
	var(7) = 666
	ignorehitpause = 1

;---------------------------------------------------------------------------
; +ポイント
;---------------------------------------------------------------------------
[State -2];＋ポイント上限
	Type= Varset
	triggerAll = !var(13)
	Trigger1= var(8) >1300
	var(13)=1

[State -2,SE]
	type = PlaySnd
	trigger1 = var(13) = 1
	value = 105,23
	volume = 255

[State -2];＋ポイント上限
	Type= Varset
	trigger1 = var(13) = 1
	var(13)=2

[State -2];ゲージ増加
 	type = poweradd
	triggerAll = var(13)
	triggerAll = stateno = [200,1999]
	trigger1 = movehit = 1
	value = 4 * (var(23)+1)
	ignorehitpause = 1

[State -2];コンボ中
 	type = Varadd
	triggerAll = !var(13)
 	trigger1 = numtarget 
	Trigger1= GameTime%4 = 0
	var(8) = (1+Floor(target,Time/44)) * NumEnemy
	ignorehitpause = 1

[State -2];前進
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 20
	trigger1 = command = "holdfwd"
	Trigger1= GameTime%6 = 0
	var(8) = 2 * NumEnemy
	ignorehitpause = 1

[State -2];ダッシュ
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 100
	trigger1 = time = 1
	var(8) = 26 * NumEnemy
	ignorehitpause = 1

[State -2];ジャンプ
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = movetype != H
	trigger1 = StateType = A
	Trigger1= GameTime%6 = 0
	var(8) = 3 * NumEnemy
	ignorehitpause = 1

[State -2];通常攻撃
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = [200,630]
	trigger1 = time = 1
	var(8) = 6 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子り込む』（弱）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1000
	Trigger1= GameTime%6 = 0
	var(8) = 1 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子り込む』（強）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1010
	Trigger1= GameTime%6 = 0
	var(8) = 1 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子り込む』（空中）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1050
	Trigger1= GameTime%6 = 0
	var(8) = 1 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子上げる』（弱）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1100
	trigger1 = time = 1
	var(8) = 26 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子上げる』（強）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1110
	trigger1 = time = 1
	var(8) = 39 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子伏せる』（弱）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1201
	trigger1 = time = 1
	var(8) = 49 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子伏せる』（強）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1261
	trigger1 = time = 1
	var(8) = 66 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子蹴る』（弱）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1310
	trigger1 = time = 1
	var(8) = 13 * NumEnemy
	ignorehitpause = 1

[State -2];『螺子蹴る』（強）
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 1360
	trigger1 = time = 1
	var(8) = 66 * NumEnemy
	ignorehitpause = 1
		
[State -2];『ゲートオブネジロン』
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2000
	trigger1 = time = 1
	var(8) = 33
	ignorehitpause = 1

[State -2];『ゲートオブネジロン』
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2050
	trigger1 = time = 1
	var(8) = 33
	ignorehitpause = 1

[State -2];『グンニグルの螺子』
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2100
	trigger1 = time = 1
	var(8) = 99
	ignorehitpause = 1

[State -2];『裸エプロン』対応
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2211
	trigger1 = AnimElemtime(2) = 0
	trigger2 = stateno = 2214
	trigger2 = AnimElemtime(2) = 0
	var(8) = 666
	ignorehitpause = 1

[State -2];『裸エプロン』未対応
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2212
	trigger1 = time = 1
	trigger2 = stateno = 2215
	trigger2 = time=1
	var(8) = 166
	ignorehitpause = 1

[State -2];『弱点を突く』
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2300
	trigger1 = anim = 2301
	trigger1 = animelemtime(3)=0
	var(8) = 39 * NumEnemy
	ignorehitpause = 1

[State -2];『魔獣をも殺す刀』成功
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2401
	trigger1 = anim = 2400
	trigger1 = animelemtime(10) = 0
	var(8) = 333
	ignorehitpause = 1

[State -2];;『勇者の剣』
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2500
	trigger1 = time = 1
	var(8) = 99
	ignorehitpause = 1

[State -2];『It's』『All Fiction!!』
 	type = Varadd
	triggerAll = !var(13)
	trigger1 = stateno = 2600
	trigger1 = time = 1
	var(8) = 133
	ignorehitpause = 1
	
;==============================================================================
;リザレクション処理
;==============================================================================
;■リザレクション用NOKOセット
[State -2]
type = assertspecial
triggerAll = RoundState = 2
triggerall = alive=1&&life>0	;生存
triggerall = var(14)>var(17)	;リザレクション使用上限を使用回数が上回ってない
triggerall = var(13)			;+螺子点灯
TriggerAll = Power>999			;ゲージ
triggerall = stateno != 2214	;

;‐P3　○P2　‐P4
trigger1 = numpartner=0&&numenemy=1
trigger1 = enemy(0),life>0
;○P3　○P2　‐P4
trigger2 = numpartner=1&&numenemy=1
trigger2 = enemy(0),life>0&&partner,life>0
;×P3　○P2　‐P4
trigger3 = numpartner=1&&numenemy=1
trigger3 = enemy(0),life>0&&(partner,life<=0&&partner,alive=0)
;‐P3　○P2　○P4
trigger4 = numpartner=0&&numenemy>1
trigger4 = enemy(0),life>0&&enemy(1),life>0
;‐P3　×P2　○P4
trigger5 = numpartner=0&&numenemy>1
trigger5 = (enemy(0),life<=0&&enemy(0),alive=0)&&enemy(1),life>0
;‐P3　○P2　×P4
trigger6 = numpartner=0&&numenemy>1
trigger6 = enemy(0),life>0&&(enemy(1),life<=0&&enemy(1),alive=0)
;○P3　○P2　○P4
trigger7 = numpartner=1&&numenemy>1
trigger7 = partner,life>0&&enemy(0),life>0&&enemy(1),life>0
;○P3　×P2　○P4
trigger8 = numpartner=1&&numenemy>1
trigger8 = partner,life>0&&(enemy(0),life<=0&&enemy(0),alive=0)&&enemy(1),life>0
;○P3　○P2　×P4
trigger9 = numpartner=1&&numenemy>1
trigger9 = partner,life>0&&enemy(0),life>0&&(enemy(1),life<=0&&enemy(1),alive=0)
;×P3　○P2　○P4
trigger10 = numpartner=1&&numenemy>1
trigger10 = (partner,life<=0&&partner,alive=0)&&enemy(0),life>0&&enemy(1),life>0
;×P3　×P2　○P4
trigger11 = numpartner=1&&numenemy>1
trigger11 = (partner,life<=0&&partner,alive=0)&&(enemy(0),life<=0&&enemy(0),alive=0)&&enemy(1),life>0
;×P3　○P2　×P4
trigger12 = numpartner=1&&numenemy>1
trigger12 = (partner,life<=0&&partner,alive=0)&&enemy(0),life>0&&(enemy(1),life<=0&&enemy(1),alive=0)

flag = noko
IgnoreHitPause = 1

[State -2]
type = Lifeset
triggerAll = RoundState = 2
triggerAll = alive
triggerAll = var(42) != 2	;勇者の剣自滅してない
triggerall = var(13)		;+螺子点灯
trigger1 = var(14)>var(17)
trigger1 = Life = 0
Trigger1 = Power>999
trigger1 = var(21):=1
value = 1
IgnoreHitPause = 1

[State -2]
type = varset
triggerAll = var(21)
trigger1 = RoundState != 2
trigger2 = !alive
var(21) = 0
IgnoreHitPause = 1

;[State -2]
;type = varadd
;trigger1 = stateno != 6660
;trigger1 = gametime%6=0
;trigger1 = var(21)
;var(21) = 1
;IgnoreHitPause = 1

;■リザレクション発動時永久コンボ脱出
[State -1, 無敵]
type = NotHitBy
trigger1 = var(21)
Trigger1 = var(49) != -1;ステートが奪われていない
Trigger1 = time < 300 ;修正
value = SCA
Time = 1
IgnoreHitPause = 1

[State -2]
type = varset
trigger1 = var(21)
var(1) = 0
IgnoreHitPause = 1

[State -2]
type = ctrlset
trigger1 = var(21)
value = 0
IgnoreHitPause = 1

[State -2 振り向き禁止]
type = AssertSpecial
trigger1 = var(21)
flag = noautoturn
IgnoreHitPause = 1

[State -2, 発動スロー処理]
type = Pause
trigger1 = gametime%(2+var(17))=0
trigger1 = var(21); && var(21)<66
Trigger1 = var(49) != -1;ステートが奪われていない
trigger1 = stateno != 6660
time = 1
movetime = 0
IgnoreHitPause = 1

;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
;強制リザ
;━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[State adi, NoMove]
Type = ChangeState
Value = 6660 ;強制リザレクション
triggerAll = RoundState = 2
triggerAll = alive
TriggerAll = Var(21)
TriggerAll = Stateno != 6660 
Trigger1 = movetype != H
Trigger1 = StateType != A
IgnoreHitPause = 1

;===========================================================================
;エフェクト処理
;===========================================================================
[State -2,200, 負オーラ消去]
type = RemoveExplod
trigger1 = NumExplod(6571)
trigger1 = !NumTarget(2400)
ID = 6571

[State -2,200, 負オーラ消去]
type = RemoveExplod
triggerAll = NumExplod(6570)
trigger1 = Enemy(0),stateno != 1385
trigger1 = Enemy(1),stateno != 1385
ID = 6570

[State -2, 暗黒闘気]
type = Explod
TriggerAll = var(49) != -1;
triggerall = var(12)
triggerall = var(13)
TriggerAll = Life < 0.3*LifeMax ;|| PalNo >= 9
TriggerAll = stateno != [2800,2810]
triggerAll = NumExplod(6513)<5
triggerAll = gametime % 30 = 0
triggerAll = var(42)<3
trigger1 = Alive
anim = 6511
ID = 6512
pos = 15+random%30, 10-random%30
postype = p1
vel = 0, -2.5
;scale = 1.25, 1.25
supermovetime = 9999
pausemovetime = 9999
sprpriority = 5;random%6*ifelse(random%2,1,-1)
ownpal = 1
removetime = 40+random%130

[State -2, 暗黒闘気]
type = Explod
TriggerAll = var(49) != -1;
triggerall = var(12)
triggerall = var(13)
TriggerAll = Life < 0.3*LifeMax ;|| PalNo >= 9
TriggerAll = stateno != [2800,2810]
triggerAll = NumExplod(6513)<5
triggerAll = gametime % 30 = 0
triggerAll = var(42)<3
trigger1 = Alive
anim = 6511
ID = 6513
pos = -15-random%30, 10-random%30
postype = p1
vel = 0, -2.5
;scale = 1.25, 1.25
supermovetime = 9999
pausemovetime = 9999
sprpriority = 5;random%6*ifelse(random%2,1,-1)
ownpal = 1
removetime = 40+random%130

[State -2, 暗黒残像]
Type = AfterImage
TriggerAll = var(49) != -1;
triggerall = var(12)
triggerall = var(13)
TriggerAll = Life < 0.3*LifeMax ;|| PalNo >= 9
trigger1 = Alive
trigger1 = !Time
Time = 1
length = 13
framegap = 4
PalBright = 0,0,0
PalContrast = 0,0,0
PalPostBright = 0,0,0
Paladd = 0,0,0
PalMul = 1,1,1
Trans = add1

[State -2, 暗黒残像]
Type = AfterImageTime
trigger1 = Alive
Time = 2
Ignorehitpause = 1

;===========================================================================
;相打ち用ヒットエフェクト
;===========================================================================
	[State -2,200, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) >= 0
		trigger1 = PrevStateNo=200&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 45, -80
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2,200, 拡散ヒットエフェ]
		type = Explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=200&&movetype=H
		trigger1 = movehit=1
		anim = 13100
		id=13100
		postype = p1
		Pos = 45, -80
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------
	[State -2, 210, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) = 0
		trigger1 = PrevStateNo=210&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 40, -20
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2, 210, 拡散ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=210&&movetype=H
		trigger1 = movehit=1
		anim = 13100
		id=13100
		postype = p1
		Pos = 30, -20
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------
	[State -2, 220, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) = 0
		trigger1 = PrevStateNo=220&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 40, -20
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2, 220, 拡散ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=220&&movetype=H
		trigger1 = movehit=1
		anim = 13100
		id=13100
		postype = p1
		Pos = 30, -20
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
[State 10220, 線形ヒットエフェ]
type = explod
triggerAll = ProjHit(10222)=1
trigger1 = StateNo=230
trigger1 = var(5) := 1
trigger2 = PrevStateNo=230&&movetype=H
anim = 13520+random%10
id=13520
postype = p2
Pos = 0,-20
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 0.5,0.5
sprpriority = 9
persistent = 0
ignorehitpause = 1


[State 10220, 拡散ヒットエフェ]
type = Explod
triggerAll = ProjHit(10222)=1
trigger1 = StateNo=230
trigger2 = PrevStateNo=230&&movetype=H
anim = 13100
id=13100
postype = p2
Pos = 0, -20
pausemovetime = 999
supermovetime = 999
ownpal = 1
scale = 0.6,0.6
sprpriority = 8
persistent = 0


;------------------------------------------------------------------------------
[State 240, 多段ヒットエフェ]
		type = Explod
		triggerAll = Numexplod(13520) < 3
		triggerAll = ProjHit(243)=1, < 1
		trigger1 = StateNo=240
		trigger1 = var(5) := 1
		trigger2 = PrevStateNo=240&&movetype=H
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 90+random%40,-100+random%50 
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 8
		persistent = 0
		ignorehitpause = 1

	[State 240, 拡散ヒットエフェ]
		type = explod
		triggerAll = Numexplod(13100) = 0
		triggerAll = ProjHit(243)=1, < 1
		trigger1 = StateNo=240
		trigger2 = PrevStateNo=240&&movetype=H
		anim = 13100
		id=13100
		postype = p1
		Pos = 90+random%40,-100+random%50 
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8

;------------------------------------------------------------------------------
	[State -2,400, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) >= 0
		trigger1 = PrevStateNo=400&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 70, -55
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2,400, 拡散ヒットエフェ]
		type = Explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=400&&movetype=H
		trigger1 = movehit=1
		type = Explod
		trigger1 = movehit
		anim = 13100
		id=13100
		postype = p1
		Pos = 70, -55
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
	[State -2, 410, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) = 0
		trigger1 = PrevStateNo=410&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 55, -40
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2, 410, 拡散ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=410&&movetype=H
		trigger1 = movehit=1
		anim = 13100
		id=13100
		postype = p1
		Pos = 55, -40
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------
	[State -2, 420, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) = 0
		trigger1 = PrevStateNo=420&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 60, -20
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2, 420, 拡散ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=420&&movetype=H
		trigger1 = movehit=1
		anim = 13100
		id=13100
		postype = p1
		Pos = 60, -20
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
	[State -2,600, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) >= 0
		trigger1 = PrevStateNo=600&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 60, -50
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2,600, 拡散ヒットエフェ]
		type = Explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=600&&movetype=H
		trigger1 = movehit=1
		type = Explod
		trigger1 = movehit
		anim = 13100
		id=13100
		postype = p1
		Pos = 60, -50
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
	[State -2, 610, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) = 0
		trigger1 = PrevStateNo=610&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 40, -70
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2, 610, 拡散ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=610&&movetype=H
		trigger1 = movehit=1
		anim = 13100
		id=13100
		postype = p1
		Pos = 40, -70
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------
	[State -2, 620, 線形ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13520) = 0
		trigger1 = PrevStateNo=620&&movetype=H
		trigger1 = movehit=1
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = 30, -40
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State -2, 620, 拡散ヒットエフェ]
		type = explod
		trigger1 = Numexplod(13100) = 0
		trigger1 = PrevStateNo=620&&movetype=H
		trigger1 = movehit=1
		anim = 13100
		id=13100
		postype = p1
		Pos = 30, -40
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------

	[State 1500,相手位置設定]
		Type = VarSet
		triggerAll = Projcontact(11303)=1
		trigger1 = StateNo=1500
		var(10) = abs(target(1500),pos x - pos x)

	[State 1510,位置固定]
		type = TargetBind
		triggerAll = ProjHit(11303)=1
		trigger1 = StateNo=1500
		time = 1
		pos = var(10),-65

	[State 1510, 線形ヒットエフェ]
		type = Explod
		triggerAll = ProjHit(11303)=1
		trigger1 = StateNo=1500
		trigger1 = var(5) := 1
		trigger2 = PrevStateNo=1500&&movetype=H
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = var(10),-65
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1

	[State 1510, 拡散ヒットエフェ]
		type = explod
		triggerAll = ProjHit(11303)=1
		trigger1 = StateNo=1500
		trigger2 = PrevStateNo=1500&&movetype=H
		anim = 13100
		id=13100
		postype = p1
		Pos = var(10),-65
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		ignorehitpause = 1
;------------------------------------------------------------------------------

	[State 1500,相手位置設定]
		Type = VarSet
		triggerAll = Projcontact(1511)=1
		trigger1 = StateNo=2300
		var(10) = abs(target(2310),pos x - pos x)
		ignorehitpause = 1


	[State 2310,位置固定]
		type = TargetBind
		triggerAll = Projhit(1511)=1
		trigger1 = StateNo=2300
		trigger1 = var(5) := 1
		time = 1
		pos = var(10),-65
		ignorehitpause = 1
		persistent = 0

	[State 2310, 線形ヒットエフェ]
		type = Explod
		triggerAll = Projhit(1511)=1
		trigger1 = StateNo=2300
		trigger2 = PrevStateNo=2300&&movetype=H
		anim = 13520+random%10
		id=13520
		postype = p1
		Pos = var(10),-65
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.5,0.5
		sprpriority = 9
		ignorehitpause = 1
		persistent=0

	[State 2310, 拡散ヒットエフェ]
		type = explod
		triggerAll = Projhit(1511)=1
		trigger1 = StateNo=2300
		trigger2 = PrevStateNo=2300&&movetype=H
		anim = 13100
		id=13100
		postype = p1
		Pos = var(10),-65
		pausemovetime = 999
		supermovetime = 999
		ownpal = 1
		scale = 0.6,0.6
		sprpriority = 8
		persistent = 0
		ignorehitpause = 1
;------------------------------------------------------------------------------



;===========================================================================
;メタ反論
;===========================================================================
;右代宮縁寿 他「メタ返し＆メタ再反論」対応ステート
[state ];メタ返し＆メタ再反論〜パワーゲージ消費×2
type=Poweradd
triggerall=alive&&!numexplod(19864)&&!numexplod(19865)
trigger1=numenemy&&!numpartner
trigger1=enemy,var(56)=19861004&&enemy,Authorname="YU-TOHARU"&&(enemy,stateno=2910||enemy,stateno=2930)&&enemy,time=2
trigger2=numenemy&&numpartner
trigger2=enemy,var(56)=19861004&&enemy,Authorname="YU-TOHARU"&&(enemy,stateno=2910||enemy,stateno=2930)&&enemy,time=2&&(ID<Partner,ID||(ID>Partner,ID&&partner,numexplod(19864)=0&&partner,numexplod(19865)=0))
trigger3=numenemy>=2&&!numpartner
trigger3=enemy(1),var(56)=19861004&&enemy(1),Authorname="YU-TOHARU"&&(enemy(1),stateno=2910||enemy(1),stateno=2930)&&enemy(1),time=2
trigger4=numenemy>=2&&numpartner
trigger4=enemy(1),var(56)=19861004&&enemy(1),Authorname="YU-TOHARU"&&(enemy(1),stateno=2910||enemy(1),stateno=2930)&&enemy(1),time=2&&(ID<Partner,ID||(ID>Partner,ID&&partner,numexplod(19864)=0&&partner,numexplod(19865)=0))
value=-2000
ignorehitpause=1

[state ];メタ返し〜ボイス
type=PlaySnd
triggerall=alive&&!numexplod(19864)
trigger1=numenemy
trigger1=enemy,var(56)=19861004&&enemy,Authorname="YU-TOHARU"&&enemy,stateno=2910&&enemy,time=2
trigger2=numenemy>=2
trigger2=enemy(1),var(56)=19861004&&enemy(1),Authorname="YU-TOHARU"&&enemy(1),stateno=2910&&enemy(1),time=2
value=s200,0
ignorehitpause=1

[state ];メタ返し〜カットイン（右向き）
type=Explod
triggerall=alive&&!numexplod(19864)
trigger1=numenemy
trigger1=enemy,var(56)=19861004&&enemy,Authorname="YU-TOHARU"&&enemy,stateno=2910&&enemy,time=2&&enemy,facing=-1
trigger2=numenemy>=2
trigger2=enemy(1),var(56)=19861004&&enemy(1),Authorname="YU-TOHARU"&&enemy(1),stateno=2910&&enemy(1),time=2&&enemy(1),facing=-1
anim=19863+random%2
ID=19864
postype=left
pos=0,240
;scale=1.25,1.25
ownpal=1
bindtime=-1
sprpriority=50
pausemovetime=100
supermovetime=100
ignorehitpause=1

[state ];メタ返し〜カットイン（左向き）
type=Explod
triggerall=alive&&!numexplod(19864)
trigger1=numenemy
trigger1=enemy,var(56)=19861004&&enemy,Authorname="YU-TOHARU"&&enemy,stateno=2910&&enemy,time=2&&enemy,facing=1
trigger2=numenemy>=2
trigger2=enemy(1),var(56)=19861004&&enemy(1),Authorname="YU-TOHARU"&&enemy(1),stateno=2910&&enemy(1),time=2&&enemy(1),facing=1
anim=19863+random%2
ID=19864
postype=right
pos=0,240
facing=-1
;scale=1.25,1.25
ownpal=1
bindtime=-1
sprpriority=50
pausemovetime=100
supermovetime=100
ignorehitpause=1

[state ];メタ再反論〜ボイス
type=PlaySnd
triggerall=alive&&!numexplod(19865)
trigger1=numenemy
trigger1=enemy,var(56)=19861004&&enemy,Authorname="YU-TOHARU"&&enemy,stateno=2930&&enemy,time=2
trigger2=numenemy>=2
trigger2=enemy(1),var(56)=19861004&&enemy(1),Authorname="YU-TOHARU"&&enemy(1),stateno=2930&&enemy(1),time=2
value=s200,1
ignorehitpause=1


[state ];メタ再反論〜カットイン（右向き）
type=Explod
triggerall=alive&&!numexplod(19865)
trigger1=numenemy
trigger1=enemy,var(56)=19861004&&enemy,Authorname="YU-TOHARU"&&enemy,stateno=2930&&enemy,time=2&&enemy,facing=-1
trigger2=numenemy>=2
trigger2=enemy(1),var(56)=19861004&&enemy(1),Authorname="YU-TOHARU"&&enemy(1),stateno=2930&&enemy(1),time=2&&enemy(1),facing=-1
anim=19865
ID=19865
postype=left
pos=0,240
;scale=0.5,0.5
ownpal=1
bindtime=-1
sprpriority=50
pausemovetime=100
supermovetime=100
ignorehitpause=1

[state ];メタ再反論〜カットイン（左向き）
type=Explod
triggerall=alive&&!numexplod(19865)
trigger1=numenemy
trigger1=enemy,var(56)=19861004&&enemy,Authorname="YU-TOHARU"&&enemy,stateno=2930&&enemy,time=2&&enemy,facing=1
trigger2=numenemy>=2
trigger2=enemy(1),var(56)=19861004&&enemy(1),Authorname="YU-TOHARU"&&enemy(1),stateno=2930&&enemy(1),time=2&&enemy(1),facing=1
anim=19865
ID=19865
postype=right
pos=0,240
facing=-1
;scale=0.5,0.5
ownpal=1
bindtime=-1
sprpriority=50
pausemovetime=100
supermovetime=100
ignorehitpause=1

;===========================================================================
;I want
;===========================================================================
[state ]
type=Explod
trigger1=stateno=3100&&movetype=H&&anim=10
anim=7652
ID=7652
postype=p1
pos=-30,0
;scale=0.5,0.5
ownpal=1
bindtime=1
sprpriority=4
pausemovetime=9999
supermovetime=9999
ignorehitpause=1

[state ]
type=ChangeAnim
trigger1=stateno=3100&&movetype=H&&anim=10
value=7651

[state ]
type = RemoveExplod
triggerall=numexplod(7652)
trigger1 = anim != 7651
ID = 7652

;===========================================================================
;裸エプロン
;===========================================================================
[state ]
type=Explod
type = RemoveExplod
triggerall=!numexplod(7653)
trigger1=anim=88260
anim=7653
ID=7653
postype=p1
pos=30,0
;scale=0.5,0.5
ownpal=1
bindtime=1
sprpriority=4
pausemovetime=9999
supermovetime=9999
ignorehitpause=1

[state ]
type = RemoveExplod
triggerall=numexplod(7653)
trigger1 = anim != 88260
ID = 7653

;===========================================================================
;ブリス
;===========================================================================

;===========================================================================
;音関連
;===========================================================================
;ボイス
[State -2, イントロスキップ]
	type = StopSnd
	TriggerAll = !IsHelper
	Trigger1 = RoundState = 2
;	Trigger1 = time = 1
	channel = 1

[State -2, 変数 KOボイス重複スイッチ初期化]
type = VarSet
trigger1 = name = "Kumagawa Misogi"
trigger1 = var(43)
trigger1 = Alive
var(43) = 0
ignorehitpause = 1

[State -2, KOボイス]
type = playsnd
trigger1 = name = "Kumagawa Misogi"
trigger1 = !Alive
trigger1 = !Var(43)
trigger1 = Var(42)!=4 && Var(42)!=6
value = S11,50+random%3
channel = 2
lowpriority = 0
ignorehitpause = 1

[State -2, KOボイス]
type = playsnd
trigger1 = name = "Kumagawa Misogi"
trigger1 = !Alive
trigger1 = !Var(43)
trigger1 = Var(42)=4
value = S11,53
channel = 2
lowpriority = 0
ignorehitpause = 1

[State -2, KOボイス]
type = playsnd
trigger1 = name = "Kumagawa Misogi"
trigger1 = !Alive
trigger1 = !Var(43)
trigger1 = Var(42)=6
value = S11,51
channel = 2
lowpriority = 0
ignorehitpause = 1

[State -2, 変数 KOボイス重複防止]
type = VarSet
trigger1 = name = "Kumagawa Misogi"
trigger1 = !var(43)
trigger1 = !Alive
var(43) = 1
ignorehitpause = 1

;===========================================================================
;ステート奪われ判断
;===========================================================================
[State -2, gametime];-2ステートへ置く
Type=varset
Trigger1 = var(49) != Gametime
var(49) = -1
ignorehitpause=1 ;Var(49)=-1でステート奪われ状態の認識。

